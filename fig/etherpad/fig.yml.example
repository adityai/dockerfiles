# RUN `fig up` AGAIN IF FIRST TIME FAILS! THIS IS BECAUSE MYSQL CONTAINER TAKES SOME TIME TO WARM UP THE FIRST TIME
etherpad:
  image: tvelocity/etherpad-lite:latest
  #ports:
  # - 9001:9001
  environment:
   # Used if you have an nginx proxypass server
   - VIRTUAL_HOST=etherpad.mydocker.co
   # Title of the Etherpad Lite instance. Defaults to "Etherpad"
   - ETHERPAD_TITLE=etherpad.mydocker.co
   # Session key for the Etherpad Lite configuraition. You can set this in case of migrating from another installation. A value is automatically generated by default.
   #- ETHERPAD_SESSION_KEY=""
   # If set, an admin account is enabled for Etherpad, and the /admin/ interface is accessible via it
   - ETHERPAD_ADMIN_PASSWORD=qwerty1
   # If the admin password is set, this defaults to “admin”. Otherwise the user can set it to another username
   - ETHERPAD_ADMIN_USER=admin
   # By default Etherpad Lite will attempt to connect as root to the mysql container. This allows to change this
   - ETHERPAD_DB_USER=etherpad_dbu
   # The password for the mysql user. If the root user is used, then the password will default to the mysql container's MYSQL_ROOT_PASSWORD
   - ETHERPAD_DB_PASSWORD=qwerty1
   # The mysql database to use. Defaults to etherpad. If the database is not available, it will be created when the container is launched
   - ETHERPAD_DB_NAME=etherpad_db
  links:
   - mysql:mysql
mysql:
  image: mysql:latest
  # not needed if you dont need access from host
  #ports:
  # - 3306:3306
  environment:
   - MYSQL_ROOT_PASSWORD=qwerty1
   - MYSQL_DATABASE=etherpad_db
   - MYSQL_USER=etherpad_dbu
   - MYSQL_PASSWORD=qwerty1
   # Used in run command
   - MYSQL_PORT_3306_TCP_ADDR=172.17.42.1
   - MYSQL_PORT_3306_TCP_PORT=3306
  volumes:
   - ./data/mysql:/var/lib/mysql
   - ./log/mysql:/var/log/mysql
